<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' https://sngeth.disqus.com http://sngeth.disqus.com https://c.disquscdn.com https://disqus.com https://d3js.org https://unpkg.com 'unsafe-inline'; style-src 'self' https://c.disquscdn.com https://fonts.googleapis.com http://fonts.googleapis.com 'unsafe-inline'; font-src 'self' https://fonts.gstatic.com http://fonts.gstatic.com; frame-src https://disqus.com; connect-src https://disqus.com;">

  {% include head.html %}

  <body>
    {% include sidebar.html %}

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <label for="sidebar-checkbox" class="sidebar-toggle"></label>

          <div class="masthead-content">
            <h3 class="masthead-title">
              <a href="/" title="Home">{{ site.title }}</a>
              <small>{{ site.tagline }}</small>
            </h3>
          </div>
        </div>
      </div>

      <div class="container content">
        {{ content }}
      </div>
    </div>
    <script id="dsq-count-scr" src="//sngeth.disqus.com/count.js"
      async></script>

    <script>
      // Close sidebar when clicking overlay or close button
      document.addEventListener('DOMContentLoaded', function() {
        const sidebarCheckbox = document.getElementById('sidebar-checkbox');
        const wrap = document.querySelector('.wrap');
        const sidebar = document.querySelector('.sidebar');
        
        // Close sidebar when clicking overlay
        wrap.addEventListener('click', function(e) {
          if (sidebarCheckbox.checked && e.target === wrap) {
            sidebarCheckbox.checked = false;
          }
        });
        
        // Close sidebar when clicking the pseudo-element close button
        // Since we can't directly click pseudo-elements, we'll detect clicks in the close button area
        sidebar.addEventListener('click', function(e) {
          if (sidebarCheckbox.checked) {
            const rect = sidebar.getBoundingClientRect();
            const closeButtonArea = {
              x: rect.right - 48, // 3rem from right
              y: rect.top + 16,   // 1rem from top
              width: 32,          // 2rem width
              height: 32          // 2rem height
            };
            
            if (e.clientX >= closeButtonArea.x && 
                e.clientX <= closeButtonArea.x + closeButtonArea.width &&
                e.clientY >= closeButtonArea.y && 
                e.clientY <= closeButtonArea.y + closeButtonArea.height) {
              sidebarCheckbox.checked = false;
            }
          }
        });
      });
    </script>

    {% include mermaid.html %}
  </body>
</html>
